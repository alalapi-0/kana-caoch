<!-- 五十音测验页面：输入罗马音并即时给出星级反馈 -->
<view class="container">
  <view class="progress">第 {{index + 1}} / {{total}} 题</view>
  <view class="question-card" wx:if="{{current}}">
    <text class="kana">{{current.kana}}</text>
    <text class="hint">请输入对应的罗马音</text>
  </view>
  <input
    class="input"
    value="{{userInput}}"
    placeholder="例如：ka"
    bindinput="onInput"
    confirm-type="done"
  />
  <button type="primary" bindtap="submit">提交答案</button>
  <button type="default" bindtap="goResult" open-type="">查看历史</button>

  <view class="result" wx:if="{{results.length}}">
    <view class="result-title">最近一次反馈</view>
    <view class="result-body">
      <text>假名：{{results[results.length - 1].kana}} → {{results[results.length - 1].romaji}}</text>
      <text>你的输入：{{results[results.length - 1].user || '（未填写）'}}</text>
      <text>准确率：{{(results[results.length - 1].accuracy * 100).toFixed(0)}}%</text>
      <star-rating stars="{{results[results.length - 1].stars}}"></star-rating>
    </view>
  </view>
</view>
